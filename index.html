<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>✨Evanes-Uneven✨</title>
    <link rel="icon" type="image/png"
        href="https://cdn.dribbble.com/users/7549673/screenshots/17206704/media/1210a9d0ec8af427967e735935861eeb.png?resize=400x300&vertical=center">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700;800;900&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --bg-color: #151515;
            --container-bg: rgba(25, 25, 25, 0.97);
            --section-bg: rgba(40, 40, 40, 0.6);
            --primary-accent: #ff4081;
            --primary-accent-hover: #d43268;
            --section-title-color: #ff6b6b;
            --text-color: #ddd;
            --text-color-light: #fff;
            --text-muted-color: #888;
            --border-color-light: rgba(255, 255, 255, 0.08);
            --border-color-dark: #444;
            --input-bg: #222;
            --link-button-bg: rgba(255, 255, 255, 0.05);
            --link-button-hover-bg: rgba(255, 64, 129, 0.15);
            --modal-bg: #333;
            --modal-border: #888;
            --shadow-color-light: rgba(0, 0, 0, 0.2);
            --shadow-color-medium: rgba(0, 0, 0, 0.3);
            --h1-glow-start: rgba(255, 107, 107, 0.3);
            --h1-glow-end: rgba(255, 107, 107, 0.6);
            --font-family: 'Roboto', sans-serif;
            --font-size-base: 1rem;
            --font-size-sm: 0.875rem;
            --font-size-md: 1rem;
            --font-size-lg: 1.125rem;
            --font-size-xl: 1.25rem;
            --font-size-h1: 1.8rem;
            --spacing-xs: 0.25rem;
            --spacing-sm: 0.5rem;
            --spacing-md: 1rem;
            --spacing-lg: 1.5rem;
            --spacing-xl: 2rem;
            --border-radius-sm: 0.25rem;
            --border-radius-md: 0.5rem;
            --border-radius-lg: 0.75rem;
        }
        html { font-size: var(--font-size-base); height: 100%; }
        
        #loading-screen { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: var(--bg-color); display: flex; flex-direction: column; justify-content: center; align-items: center; z-index: 10000; opacity: 1; visibility: visible; overflow: hidden; }
        .loading-title-container { perspective: 800px; text-align: center; position: relative; width: 90%; max-width: 600px; }
        .loading-title { font-family: 'Roboto', sans-serif; font-weight: 900; font-size: clamp(2.5rem, 8vw, 4.5rem); color: var(--text-color-light); display: flex; justify-content: center; flex-wrap: nowrap; will-change: transform, opacity; }
        .loading-title span.char { display: inline-block; opacity: 0; transform: translateY(30px) scale(0.8); will-change: transform, opacity; margin: 0 0.03em; color: var(--text-color-light); }
        #loading-title-unevennesx { opacity: 0; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%) translateY(20px); width: 100%; }

        body { font-family: var(--font-family); font-size: var(--font-size-md); line-height: 1.6; margin: 0; background-color: var(--bg-color); color: var(--text-color); padding: var(--spacing-sm); box-sizing: border-box; min-height: 100%; display: flex; flex-direction: column; justify-content: center; align-items: center; overflow-x: hidden; opacity: 0; }
        .gsap-hidden { opacity: 0; visibility: hidden; }
        .container { width: 100%; max-width: 50rem; background: var(--container-bg); border-radius: var(--border-radius-lg); box-shadow: 0 0.125rem 0.5rem var(--shadow-color-light); padding: var(--spacing-lg) var(--spacing-xl); margin: var(--spacing-sm) auto; position: relative; z-index: 10; border: 1px solid var(--border-color-light); }
        h1 { text-align: center; color: var(--text-color-light); font-size: var(--font-size-h1); font-weight: 500; margin: var(--spacing-md) 0 var(--spacing-lg); padding: var(--spacing-sm); cursor: pointer; display: inline-block; position: relative; left: 50%; transform: translateX(-50%); transition: color 0.3s ease; }
        h1 .title-ghost { opacity: 0.7; transition: opacity 0.3s ease, transform 0.3s ease; display: inline-block; }
        h1:hover .title-ghost { opacity: 1; transform: translateY(-0.125rem) scale(1.1); }
        h1:hover { color: var(--primary-accent); }
        .section { margin-bottom: var(--spacing-sm); border-radius: var(--border-radius-md); background: var(--section-bg); overflow: hidden; transition: transform 0.3s ease, box-shadow 0.3s ease; }
        .section:hover { transform: translateY(-0.125rem); box-shadow: 0 0.25rem 0.9375rem var(--shadow-color-medium); }
        .section-header { padding: 0.75rem 1.25rem; display: flex; align-items: center; justify-content: space-between; cursor: pointer; transition: background-color 0.3s ease; }
        .section-header:hover { background-color: rgba(255, 255, 255, 0.05); }
        .section-title { font-size: 1em; font-weight: 500; color: var(--section-title-color); margin: 0; display: flex; align-items: center; gap: var(--spacing-sm); }
        .section-title .icon { width: 1.25em; height: 1.25em; stroke-width: 2.2; color: currentColor; }
        .section-title .icon.principales { color: var(--primary-accent); } .section-title .icon.destacados { color: #4dabf7; } .section-title .icon.tecnicas { color: #fab005; } .section-title .icon.utilidades { color: #8ce99a; } .section-title .icon.owner { color: #e589f0; }
        .arrow .icon { transition: transform 0.35s cubic-bezier(0.25, 0.1, 0.25, 1); color: var(--text-muted-color); width: 1.125em; height: 1.125em; }
        .grid-links { display: grid; grid-template-columns: 1fr; gap: var(--spacing-md); padding-left: 1.375rem; padding-right: 1.375rem; height: 0; opacity: 0; overflow: hidden; }
        .link-button { padding: 0.9375rem 1.25rem; background: var(--link-button-bg); border: 1px solid var(--border-color-light); border-radius: var(--border-radius-md); color: var(--text-color); text-decoration: none; font-size: var(--font-size-sm); font-weight: 400; transition: all 0.25s cubic-bezier(0.25, 0.1, 0.25, 1); display: flex; align-items: center; justify-content: flex-start; gap: var(--spacing-sm); }
        .link-button:hover { background: var(--link-button-hover-bg); color: var(--text-color-light); transform: translateY(-0.1875rem); box-shadow: 0 0.25rem 0.625rem rgba(var(--primary-accent-rgb), 0.15); }
        .link-button .icon { width: 1em; height: 1em; stroke-width: 2.2; color: var(--text-muted-color); margin-right: var(--spacing-sm); }
        #search-input { width: 100%; padding: 0.75rem 0.9375rem; margin-bottom: var(--spacing-lg); border: 1px solid var(--border-color-dark); background-color: var(--input-bg); color: var(--text-color); border-radius: var(--border-radius-sm); box-sizing: border-box; font-size: var(--font-size-md); outline: none; transition: border-color 0.3s, box-shadow 0.3s; }
        #search-input::placeholder { color: var(--text-muted-color); }
        #search-input:focus { border-color: var(--primary-accent); box-shadow: 0 0 0 0.125rem rgba(var(--primary-accent-rgb), 0.2); }
        .modal { display: none; position: fixed; z-index: 1001; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0, 0, 0, 0.4); backdrop-filter: blur(0.1875rem); align-items: center; justify-content: center; }
        .modal-content { background-color: var(--modal-bg); color: var(--text-color); margin: auto; padding: var(--spacing-lg); border: 1px solid var(--modal-border); max-width: 28.125rem; width: 90%; border-radius: var(--border-radius-lg); box-shadow: 0 0.25rem 0.5rem var(--shadow-color-light); text-align: center; position: relative; }
        .modal-content h2 { margin-top: 0; color: var(--section-title-color); font-size: 1.5em; margin-bottom: var(--spacing-md); display: flex; align-items: center; justify-content: center; gap: var(--spacing-sm); }
        .modal-content h2 .icon { width: 1.5em; height: 1.5em; }
        .modal-content label { display: block; margin-bottom: var(--spacing-xs); color: var(--text-color-light); text-align: left; font-size: var(--font-size-sm); }
        .modal-content input[type="text"], .modal-content input[type="password"] { width: 100%; padding: 0.625rem; margin-bottom: var(--spacing-md); border: 1px solid var(--border-color-dark); background-color: var(--input-bg); color: var(--text-color); border-radius: var(--border-radius-sm); box-sizing: border-box; font-size: var(--font-size-md); }
        .modal-content input[type="text"]:focus, .modal-content input[type="password"]:focus { border-color: var(--primary-accent); box-shadow: 0 0 0 0.125rem rgba(var(--primary-accent-rgb), 0.2); outline: none; }
        .modal-content button { background-color: var(--primary-accent); color: var(--text-color-light); padding: 0.75rem 1.25rem; border: none; border-radius: var(--border-radius-sm); cursor: pointer; font-size: 1em; font-weight: 500; transition: background-color 0.3s ease; width: 100%; }
        .modal-content button:hover { background-color: var(--primary-accent-hover); }
        .modal-content p#passwordError { color: red; display: none; margin-top: var(--spacing-sm); font-size: var(--font-size-sm); }
        .close-button { color: var(--text-muted-color); position: absolute; top: 0.75rem; right: 0.9375rem; cursor: pointer; transition: color 0.2s ease, transform 0.2s ease; }
        .close-button .icon { width: 1.5em; height: 1.5em; }
        .close-button:hover { color: var(--primary-accent); transform: rotate(90deg); }
        #music-player-container { position: fixed; bottom: 0.9375rem; left: 0.9375rem; background-color: rgba(0,0,0,0.5); backdrop-filter: blur(0.3125rem); padding: 0.625rem 0.9375rem; border-radius: var(--border-radius-sm); z-index: 999; display: flex; align-items: center; gap: var(--spacing-sm); box-shadow: 0 0.1875rem 0.625rem var(--shadow-color-light); border: 1px solid var(--border-color-light); }
        #track-name { color: var(--text-color-light); font-size: var(--font-size-sm); font-weight: 500; }
        #controls-container { display: flex; align-items: center; gap: var(--spacing-xs); }
        #play-pause-button, #prev-button, #next-button { background-color: transparent; color: var(--text-color-light); border: none; padding: var(--spacing-xs); cursor: pointer; transition: color 0.3s ease, transform 0.2s ease; border-radius: 50%; display: flex; align-items: center; justify-content: center; }
        #play-pause-button .icon, #prev-button .icon, #next-button .icon { width: 1.1em; height: 1.1em; }
        #play-pause-button:hover, #prev-button:hover, #next-button:hover { color: var(--primary-accent); transform: scale(1.1); }
        #volume-slider { width: 3.75rem; height: 0.25rem; background: #555; outline: none; opacity: 0.7; transition: opacity .2s; cursor: pointer; border-radius: 0.1875rem; -webkit-appearance: none; appearance: none; vertical-align: middle; }
        #volume-slider::-webkit-slider-thumb { -webkit-appearance: none; appearance: none; width: 0.625rem; height: 0.625rem; background: var(--text-color-light); cursor: pointer; border-radius: 50%; border: 2px solid var(--bg-color); }
        #volume-slider::-moz-range-thumb { width: 0.625rem; height: 0.625rem; background: var(--text-color-light); cursor: pointer; border-radius: 50%; border: 2px solid var(--bg-color); }
        #volume-slider:hover { opacity: 1; }
        @media (min-width: 37.5rem) { .grid-links { grid-template-columns: repeat(auto-fit, minmax(12.5rem, 1fr)); gap: var(--spacing-md); padding-left: 1.375rem; padding-right: 1.375rem; } .link-button { padding: 1.125rem 1.5625rem; } }
        @media (max-width: 37.4375rem) { body { padding: var(--spacing-sm); } .container { width: calc(100% - var(--spacing-md)); padding: var(--spacing-md); margin: var(--spacing-sm) auto; margin-bottom: 4.375rem; } h1 { font-size: 1.5em; margin: var(--spacing-sm) 0 var(--spacing-md); } .section { margin-bottom: var(--spacing-sm); } .section-header { padding: 0.75rem 0.9375rem; } .section-title { font-size: 0.9em; } .grid-links { padding-left: 1.125rem; padding-right: 1.125rem; gap: var(--spacing-sm); } .link-button { padding: 0.625rem 0.75rem; font-size: var(--font-size-sm); justify-content: center; } .link-button .icon { margin-right: var(--spacing-xs); } #search-input { padding: 0.625rem 0.75rem; margin-bottom: var(--spacing-md); } #music-player-container { bottom: var(--spacing-xs); left: var(--spacing-xs); padding: var(--spacing-xs); gap: var(--spacing-xs); width: auto; } #track-name { display: none; } #controls-container { gap: 0.1875rem; } #play-pause-button, #prev-button, #next-button { padding: 0.1875rem; } #play-pause-button .icon, #prev-button .icon, #next-button .icon { width: 0.9em; height: 0.9em; } #volume-slider { display: none; } }

    </style>
</head>

<body>
    <div id="loading-screen">
        <div class="loading-title-container">
            <div class="loading-title" id="loading-title-evanescence">
                {/* Las letras se generarán con JS */}
            </div>
            <div class="loading-title" id="loading-title-unevennesx">
                {/* Las letras se generarán con JS */}
            </div>
        </div>
    </div>

    <div class="container gsap-hidden">
        <h1>
            <a href="https://unevennesx.github.io/consultas/" style="text-decoration: none; color: inherit;">UnevennesX <span class="title-ghost">👻</span> EvannescencE</a>
        </h1>

        <input type="text" id="search-input" placeholder="Buscar proyectos..." class="gsap-hidden">
        <div id="no-results-message" style="display:none; color: var(--text-color-light); text-align: center; margin: var(--spacing-md) 0;">No se encontraron resultados.</div>

        <div class="section gsap-hidden" data-section-name="Principales">
            <div class="section-header">
                <div class="section-title"><i data-feather="star" class="icon principales"></i> Principales</div>
                <div class="arrow"><i data-feather="chevron-down" class="icon"></i></div>
            </div>
            <div class="grid-links">
                <a href="https://extension-de-pg.vercel.app/" class="link-button"><i data-feather="paperclip" class="icon"></i> Precio del $</a>
                <a href="https://mi-pg.vercel.app/login/" class="link-button"><i data-feather="paperclip" class="icon"></i> UnevennesX</a>
                <a href="https://unevennesx.github.io/UserAgent/" class="link-button"><i data-feather="paperclip" class="icon"></i> User Agent 2.0</a>
                <a href="https://unevennesx.github.io/Avanced-UnevennesX/" class="link-button"><i data-feather="paperclip" class="icon"></i> Avanced-EvanneS</a>
                <a href="https://unevennesx.github.io/zipcodes/" class="link-button"><i data-feather="paperclip" class="icon"></i> Zipcode</a>
            </div>
        </div>
        <div class="section gsap-hidden" data-section-name="Destacados">
            <div class="section-header">
                <div class="section-title"><i data-feather="send" class="icon destacados"></i> Destacados</div>
                <div class="arrow"><i data-feather="chevron-down" class="icon"></i></div>
            </div>
            <div class="grid-links">
                <a href="https://unevennesx.github.io/-CheckLinks-/" class="link-button"><i data-feather="paperclip" class="icon"></i> ALL SAMPLICIOUS</a>
                <a href="https://unevennesx.github.io/app/" class="link-button"><i data-feather="paperclip" class="icon"></i> glimpsehere.com</a>
                <a href="https://unevennesx.github.io/zamplia/" class="link-button"><i data-feather="paperclip" class="icon"></i> Zamplia</a>
                <a href="https://unevennesx.github.io/UnevennesX/" class="link-button"><i data-feather="paperclip" class="icon"></i> Armador V1</a>
                <a href="https://unevennesx.github.io/cube/" class="link-button"><i data-feather="paperclip" class="icon"></i> Sample-Cube</a>
                <a href="https://unevennesx.github.io/savanta/" class="link-button"><i data-feather="paperclip" class="icon"></i> Savanta</a>
                <a href="https://unevennesx.github.io/ISA/" class="link-button"><i data-feather="paperclip" class="icon"></i> ISA</a>
                <a href="https://unevennesx.github.io/Survey.Dashmr/" class="link-button"><i data-feather="paperclip" class="icon"></i> Survey.Dashmr</a>
                <a href="https://unevennesx.github.io/Survey-Cint/" class="link-button"><i data-feather="paperclip" class="icon"></i> Sw.Cint</a>
                <a href="https://unevennesx.github.io/tsid/" class="link-button"><i data-feather="paperclip" class="icon"></i> TSID</a>
                <a href="https://unevennesx.github.io/rd-secured/" class="link-button"><i data-feather="paperclip" class="icon"></i> Rd.Secured <span style="opacity:0.8;">👻</span></a>
                <a href="https://unevennesx.github.io/RD-SIN-rd_proj_ud-/" class="link-button"><i data-feather="paperclip" class="icon"></i> Rd."rd_proj_ud"</a>
                <a href="https://unevennesx.github.io/All-Spectrum/" class="link-button"><i data-feather="paperclip" class="icon"></i> ALL Spectrum</a>
                <a href="https://unevennesx.github.io/spectrum-corto/" class="link-button"><i data-feather="paperclip" class="icon"></i> Spectrum Corto</a>
                <a href="https://unevennesx.github.io/Survey.Emi/" class="link-button"><i data-feather="paperclip" class="icon"></i> Survey.Emi</a>
            </div>
        </div>
        <div class="section gsap-hidden" data-section-name="Técnicas">
            <div class="section-header">
                <div class="section-title"><i data-feather="code" class="icon tecnicas"></i> Técnicas</div>
                <div class="arrow"><i data-feather="chevron-down" class="icon"></i></div>
            </div>
            <div class="grid-links">
                <a href="https://unevennesx.github.io/fakename/" class="link-button"><i data-feather="paperclip" class="icon"></i> Fake-Name</a>
                <a href="https://unevennesx.github.io/cpx-tap-bit/" class="link-button"><i data-feather="paperclip" class="icon"></i> CPX</a>
                <a href="https://unevennesx.github.io/calculadora/" class="link-button"><i data-feather="paperclip" class="icon"></i> Calculadora</a>
            </div>
        </div>
        <div class="section gsap-hidden" data-section-name="Utilidades">
            <div class="section-header">
                <div class="section-title"><i data-feather="tool" class="icon utilidades"></i> Utilidades</div>
                <div class="arrow"><i data-feather="chevron-down" class="icon"></i></div>
            </div>
            <div class="grid-links">
                <a href="https://unevennesx.github.io/UID-ONLY/" class="link-button"><i data-feather="paperclip" class="icon"></i> Bitlabs</a>
                <a href="https://unevennesx.github.io/userv1/" class="link-button"><i data-feather="paperclip" class="icon"></i> User Agent 1.0</a>
                <a href="https://unevennesx.github.io/agg-consultas/" class="link-button"><i data-feather="paperclip" class="icon"></i> Admin Consultas</a>
            </div>
        </div>
        
        <div class="section gsap-hidden" data-section-name="👑 Owner" id="owner-section">
            <div class="section-header" id="owner-header">
                <div class="section-title"><i data-feather="lock" class="icon owner"></i> Owner</div>
                <div class="arrow"><i data-feather="chevron-down" class="icon"></i></div>
            </div>
            <div class="grid-links" id="owner-links">
                <a href="https://unevennesx.github.io/user-owner/" class="link-button"><i data-feather="paperclip" class="icon"></i> UserAgent V3</a>
                <a href="https://mi-pg.vercel.app/extraer-links/" class="link-button"><i data-feather="paperclip" class="icon"></i> Links UnevennesX</a>
                <a href="https://mi-pg.vercel.app/offline_backup/manage/" class="link-button"><i data-feather="paperclip" class="icon"></i> Backup UnevennesX</a>
            </div>
        </div>
    </div>

    <div id="music-player-container" class="gsap-hidden">
        <span id="track-name">New York</span>
        <div id="controls-container">
            <button id="prev-button" aria-label="Previous track"><i data-feather="skip-back" class="icon"></i></button>
            <button id="play-pause-button" aria-label="Play or Pause">
                <i data-feather="play" class="icon icon-play"></i><i data-feather="pause" class="icon icon-pause" style="display:none;"></i>
            </button>
            <button id="next-button" aria-label="Next track"><i data-feather="skip-forward" class="icon"></i></button>
        </div>
        <input type="range" id="volume-slider" min="0" max="1" step="0.01" value="0.1" aria-label="Volume">
        <audio id="background-music" loop>
            <source src="audio/newyork.mp3" type="audio/mpeg">
            <source src="audio/miami.mp3" type="audio/mpeg">
            <source src="audio/rd.mp3" type="audio/mpeg">
        </audio>
    </div>

    <div id="passwordModal" class="modal">
        <div class="modal-content">
            <span class="close-button" id="closeModal" aria-label="Cerrar modal"><i data-feather="x" class="icon"></i></span>
            <h2><i data-feather="key" class="icon"></i> Acceso Owner</h2>
            <label for="usernameInput">Usuario:</label>
            <input type="text" id="usernameInput" placeholder="Usuario" value="UnevennesX" readonly>
            <label for="passwordInput">Contraseña:</label>
            <input type="password" id="passwordInput" placeholder="Contraseña">
            <button id="submitPassword">Entrar</button>
            <p id="passwordError">Usuario o contraseña incorrectos.</p>
        </div>
    </div>

    <script src="js/gsap.min.js"></script>
    <script src="js/feather.min.js"></script>
    <script>
        "use strict";

        // --- (JavaScript idéntico a la versión anterior) ---
        function getRgbFromCssVar(cssVarName) { const colorStr = getComputedStyle(document.documentElement).getPropertyValue(cssVarName).trim(); if (colorStr.startsWith('#')) { const hex = colorStr.replace('#', ''); const r = parseInt(hex.substring(0, 2), 16); const g = parseInt(hex.substring(2, 4), 16); const b = parseInt(hex.substring(4, 6), 16); return `${r}, ${g}, ${b}`; } else if (colorStr.startsWith('rgba')) { const parts = colorStr.substring(colorStr.indexOf('(') + 1, colorStr.lastIndexOf(')')).split(','); return `${parseInt(parts[0])}, ${parseInt(parts[1])}, ${parseInt(parts[2])}`; } return '255, 64, 129';  }
        document.documentElement.style.setProperty('--primary-accent-rgb', getRgbFromCssVar('--primary-accent'));
        document.documentElement.style.setProperty('--h1-glow-start-rgb', getRgbFromCssVar('--h1-glow-start'));
        document.documentElement.style.setProperty('--h1-glow-end-rgb', getRgbFromCssVar('--h1-glow-end'));
        function normalizeString(str) { return str.normalize("NFD").replace(/[\u0300-\u036f]/g, "").toLowerCase(); }
        const searchInput = document.getElementById('search-input');
        const noResultsMessage = document.getElementById('no-results-message');
        const audio = document.getElementById('background-music');
        const playPauseButton = document.getElementById('play-pause-button');
        const prevButton = document.getElementById('prev-button');
        const nextButton = document.getElementById('next-button');
        const volumeSlider = document.getElementById('volume-slider');
        const trackNameDisplay = document.getElementById('track-name');
        const passwordModal = document.getElementById('passwordModal');
        const closeModalButton = document.getElementById('closeModal');
        const submitPasswordButton = document.getElementById('submitPassword');
        const passwordInput = document.getElementById('passwordInput');
        const ownerSection = document.getElementById('owner-section');
        const ownerHeader = document.getElementById('owner-header');
        const ownerLinks = document.getElementById('owner-links');
        const passwordError = document.getElementById('passwordError');
        const correctUsername = "UnevennesX"; 
        const correctPassword = "EvannescencE";
        let isAuthenticated = localStorage.getItem('isAuthenticated') === 'true';
        let isPlaying = false;
        let currentTrackIndex = 0;
        const tracks = [ { src: "audio/newyork.mp3", name: "New York" }, { src: "audio/miami.mp3", name: "Miami" }, { src: "audio/rd.mp3", name: "RD" }, ];
        let hasInteracted = false;
        const gridLinksPadding = { top: "1.25rem", bottom: "1.25rem" };
        const sectionEase = "power3.inOut";
        const sectionDuration = 0.35;
        function updateOwnerSectionVisibility(animate = false) { if (!ownerSection || !ownerLinks) return; const isCurrentlyActive = ownerSection.classList.contains('active'); ownerSection.style.display = "block"; const targetProps = { height: 0, opacity: 0, paddingTop: "0px", paddingBottom: "0px" }; if (isAuthenticated && isCurrentlyActive) { targetProps.height = "auto"; targetProps.opacity = 1; targetProps.paddingTop = gridLinksPadding.top; targetProps.paddingBottom = gridLinksPadding.bottom; } if (animate) { gsap.to(ownerLinks, { ...targetProps, duration: sectionDuration, ease: sectionEase }); } else { gsap.set(ownerLinks, targetProps); } if (!isAuthenticated) { ownerSection.classList.remove("active"); const arrowIcon = ownerHeader.querySelector('.arrow .icon'); if (arrowIcon) gsap.to(arrowIcon, { rotation: 0, duration: 0.3, ease: sectionEase }); } }
        function checkPassword() { const enteredPassword = passwordInput.value; if (enteredPassword === correctPassword) { isAuthenticated = true; localStorage.setItem("isAuthenticated", "true"); if (passwordModal) { gsap.to(passwordModal.querySelector('.modal-content'), { y: 20, opacity: 0, scale: 0.95, duration: 0.25, ease: "power2.in" }); gsap.to(passwordModal, { autoAlpha: 0, duration: 0.3, delay:0.1, ease: "power2.in", onComplete: () => passwordModal.style.display = "none" }); } if (ownerSection) { ownerSection.classList.add("active"); const arrowIcon = ownerHeader.querySelector('.arrow .icon'); if (arrowIcon) gsap.to(arrowIcon, { rotation: 180, duration: 0.3, ease: sectionEase }); } if (passwordError) passwordError.style.display = "none"; if (passwordInput) passwordInput.value = ""; updateOwnerSectionVisibility(true); } else { if (passwordError) { passwordError.style.display = "block"; gsap.fromTo(passwordError, {opacity: 0, y: -10}, {opacity: 1, y: 0, duration: 0.3, ease: "bounce.out"}); gsap.fromTo(passwordModal.querySelector('.modal-content'), {x:0}, {x:10, duration:0.05, repeat:5, yoyo:true, clearProps:"x", ease:"circ.inOut"}); } isAuthenticated = false; localStorage.setItem("isAuthenticated", "false"); updateOwnerSectionVisibility(); } }
        function handleSearch() { let searchTerm = searchInput.value; searchTerm = normalizeString(searchTerm); let hasResults = false; let ownerHasVisibleLinks = false; if (searchTerm.length < 2) { document.querySelectorAll('.section').forEach(section => { section.style.display = 'block'; }); document.querySelectorAll('.link-button').forEach(link => { link.style.display = 'flex'; }); if (noResultsMessage) noResultsMessage.style.display = 'none'; updateOwnerSectionVisibility(); return; } document.querySelectorAll('.section').forEach(section => { section.style.display = 'none'; }); document.querySelectorAll('.link-button').forEach(link => { link.style.display = 'none'; }); document.querySelectorAll('.link-button').forEach(link => { const linkText = normalizeString(link.textContent); const section = link.closest('.section'); if (section && linkText.includes(searchTerm)) { const isOwnerLink = section.id === 'owner-section'; if (!isOwnerLink) { link.style.display = 'flex'; section.style.display = 'block'; if (!section.classList.contains('active')) { section.classList.add('active'); const gridLinks = section.querySelector('.grid-links'); const arrowIcon = section.querySelector('.arrow .icon'); gsap.to(gridLinks, { height: "auto", opacity: 1, paddingTop: gridLinksPadding.top, paddingBottom: gridLinksPadding.bottom, duration: sectionDuration, ease: sectionEase }); if(arrowIcon) gsap.to(arrowIcon, { rotation: 180, duration: 0.3, ease: sectionEase }); } hasResults = true; } else if (isOwnerLink && isAuthenticated) { link.style.display = 'flex'; ownerHasVisibleLinks = true; hasResults = true; } } }); if (ownerSection) { if (ownerHasVisibleLinks) { ownerSection.style.display = 'block'; if (!ownerSection.classList.contains('active')) { ownerSection.classList.add('active'); const arrowIcon = ownerHeader.querySelector('.arrow .icon'); if(arrowIcon) gsap.to(arrowIcon, { rotation: 180, duration: 0.3, ease: sectionEase }); } } } if (noResultsMessage) noResultsMessage.style.display = hasResults ? 'none' : 'block'; updateOwnerSectionVisibility(true); }
        function loadTrack(trackIndex) { if(trackIndex<0){trackIndex=tracks.length-1}else if(trackIndex>=tracks.length){trackIndex=0}currentTrackIndex=trackIndex;if(audio){const e=tracks[trackIndex].src;const t=audio.currentSrc?new URL(audio.currentSrc,window.location.href).pathname:null;const n=new URL(e,window.location.href).pathname;if(audio.src===""||t!==n){try { audio.src = e; audio.load(); } catch(err){ console.error("Error setting audio src:", err); }}}if(trackNameDisplay)trackNameDisplay.textContent=tracks[trackIndex].name;localStorage.setItem("currentTrackIndex",currentTrackIndex) }
        function loadSavedState() { const e=localStorage.getItem("currentTrackIndex");currentTrackIndex=e!==null?parseInt(e,10):0;const t=localStorage.getItem("volume");if(volumeSlider){volumeSlider.value=t!==null?t:.1}if(audio)audio.volume=t!==null?t:.1;if(playPauseButton){ const playIcon = playPauseButton.querySelector('.icon-play'); const pauseIcon = playPauseButton.querySelector('.icon-pause'); playIcon.style.display = 'inline-block'; pauseIcon.style.display = 'none';}loadTrack(currentTrackIndex) }
        function initialUserInteraction() { if(!hasInteracted && audio){ hasInteracted=!0; loadSavedState(); if(localStorage.getItem("musicState")==="playing"){ audio.play().then(()=>{isPlaying=!0; if(playPauseButton){const playIcon = playPauseButton.querySelector('.icon-play'); const pauseIcon = playPauseButton.querySelector('.icon-pause'); playIcon.style.display = 'none'; pauseIcon.style.display = 'inline-block';}}).catch(e=>{ localStorage.setItem("musicState","paused"); isPlaying = false; if(playPauseButton){const playIcon = playPauseButton.querySelector('.icon-play'); const pauseIcon = playPauseButton.querySelector('.icon-pause'); playIcon.style.display = 'inline-block'; pauseIcon.style.display = 'none'; }}); }} document.removeEventListener("click",initialUserInteraction); document.removeEventListener("touchstart", initialUserInteraction); }
        document.querySelectorAll('.section:not(#owner-section) .section-header').forEach(header => { header.addEventListener('click', () => { const section = header.parentElement; const gridLinks = section.querySelector('.grid-links'); const arrowIcon = header.querySelector('.arrow .icon'); const linksToAnimate = Array.from(gridLinks.querySelectorAll('.link-button')); section.classList.toggle('active'); if (section.classList.contains('active')) { gsap.to(gridLinks, { height: "auto", opacity: 1, paddingTop: gridLinksPadding.top, paddingBottom: gridLinksPadding.bottom, duration: sectionDuration, ease: sectionEase }); if(arrowIcon) gsap.to(arrowIcon, { rotation: 180, duration: 0.3, ease: sectionEase }); gsap.fromTo(linksToAnimate, { opacity: 0, y: "0.5rem" }, { opacity: 1, y: "0rem", duration: 0.3, ease: "power2.out", stagger: 0.05, delay: 0.1 }); } else { gsap.to(gridLinks, { height: 0, opacity: 0, paddingTop: "0px", paddingBottom: "0px", duration: sectionDuration, ease: sectionEase }); if(arrowIcon) gsap.to(arrowIcon, { rotation: 0, duration: 0.3, ease: sectionEase }); } document.querySelectorAll('.section:not(#owner-section)').forEach(otherSection => { if (otherSection !== section && otherSection.classList.contains('active')) { otherSection.classList.remove('active'); const otherGridLinks = otherSection.querySelector('.grid-links'); const otherArrowIcon = otherSection.querySelector('.arrow .icon'); gsap.to(otherGridLinks, { height: 0, opacity: 0, paddingTop: "0px", paddingBottom: "0px", duration: sectionDuration, ease: sectionEase }); if(otherArrowIcon) gsap.to(otherArrowIcon, { rotation: 0, duration: 0.3, ease: sectionEase }); } }); }); });
        searchInput?.addEventListener('input', handleSearch);
        playPauseButton?.addEventListener('click', () => { const playIcon = playPauseButton.querySelector('.icon-play'); const pauseIcon = playPauseButton.querySelector('.icon-pause'); if(isPlaying){ audio.pause(); playIcon.style.display = 'inline-block'; pauseIcon.style.display = 'none'; localStorage.setItem("musicState","paused"); } else { if(!audio.src || audio.src === window.location.href){ loadTrack(currentTrackIndex); } audio.play().then(()=>{ playIcon.style.display = 'none'; pauseIcon.style.display = 'inline-block'; localStorage.setItem("musicState","playing"); }).catch(e=>{ isPlaying = !isPlaying; console.error("Error playing audio:", e); }); } isPlaying=!isPlaying; });
        prevButton?.addEventListener('click', () => { loadTrack(currentTrackIndex-1);if(isPlaying){audio.play().catch(e=>console.error("Error playing prev audio:",e))} });
        nextButton?.addEventListener('click', () => { loadTrack(currentTrackIndex+1);if(isPlaying){audio.play().catch(e=>console.error("Error playing next audio:",e))} });
        volumeSlider?.addEventListener('input', () => { if (audio) audio.volume=volumeSlider.value; localStorage.setItem("volume",volumeSlider.value) });
        audio?.addEventListener('ended', () => { if(isPlaying){loadTrack(currentTrackIndex+1);audio.play().catch(e=>console.error("Error playing audio on ended:",e))}else{loadTrack(currentTrackIndex+1)} });
        document.addEventListener('click', initialUserInteraction, { once: true });
        document.addEventListener('touchstart', initialUserInteraction, { once: true });
        ownerHeader?.addEventListener('click', (event) => { event.preventDefault(); const arrowIcon = ownerHeader.querySelector('.arrow .icon'); if (!isAuthenticated) { if (passwordModal) { passwordModal.style.display = "flex"; gsap.fromTo(passwordModal, {autoAlpha:0}, { autoAlpha: 1, duration: 0.3, ease: "power2.out" }); gsap.fromTo(passwordModal.querySelector('.modal-content'), { y: "-1.875rem", opacity: 0, scale:0.95}, { y: "0rem", opacity: 1, scale:1, duration: 0.4, ease: "back.out(1.7)"}); } if (passwordInput) passwordInput.focus(); } else { ownerSection.classList.toggle("active"); if (arrowIcon) gsap.to(arrowIcon, { rotation: ownerSection.classList.contains('active') ? 180 : 0, duration: 0.3, ease: sectionEase }); updateOwnerSectionVisibility(true); } });
        closeModalButton?.addEventListener('click', () => { if (passwordModal) { gsap.to(passwordModal.querySelector('.modal-content'), { y: "1.25rem", opacity: 0, scale: 0.95, duration: 0.25, ease: "power2.in" }); gsap.to(passwordModal, { autoAlpha: 0, duration: 0.3, delay:0.1, ease: "power2.in", onComplete: () => passwordModal.style.display = "none" }); } });
        submitPasswordButton?.addEventListener('click', checkPassword);
        passwordInput?.addEventListener('keypress', (event) => { if (event.key === "Enter") { checkPassword(); } });
        window.addEventListener('click', (event) => { if (event.target === passwordModal && passwordModal && passwordModal.style.display !== "none") { gsap.to(passwordModal.querySelector('.modal-content'), { y: "1.25rem", opacity: 0, scale: 0.95, duration: 0.25, ease: "power2.in" }); gsap.to(passwordModal, { autoAlpha: 0, duration: 0.3, delay:0.1, ease: "power2.in", onComplete: () => passwordModal.style.display = "none" }); } });
        
        document.addEventListener("DOMContentLoaded", () => {
            if (typeof feather !== 'undefined') {
                feather.replace({width: '1em', height: '1em', 'stroke-width': 2.2});
            } else {
                console.error("Feather Icons script not loaded. Make sure js/feather.min.js is present or CDN is working.");
            }
            
            const loadingScreen = document.getElementById('loading-screen');
            gsap.set("#loading-screen", { autoAlpha: 1 });

            function splitTextIntoSpans(targetSelector, text) {
                const target = document.querySelector(targetSelector);
                if (!target) return [];
                target.innerHTML = '';
                return text.split("").map(char => {
                    const span = document.createElement("span");
                    span.className = "char";
                    span.style.setProperty('--char-index', target.children.length);
                    span.textContent = char === " " ? "\u00A0" : char;
                    target.appendChild(span);
                    return span;
                });
            }

            document.querySelectorAll('.section').forEach(section => { const gridLinks = section.querySelector('.grid-links'); const arrowIcon = section.querySelector('.arrow .icon'); const initialPadding = { paddingTop: "0px", paddingBottom: "0px" }; if (section.classList.contains('active')) { initialPadding.paddingTop = gridLinksPadding.top; initialPadding.paddingBottom = gridLinksPadding.bottom; gsap.set(gridLinks, { height: "auto", opacity: 1, ...initialPadding }); if(arrowIcon) gsap.set(arrowIcon, { rotation: 180 }); } else { gsap.set(gridLinks, { height: 0, opacity: 0, ...initialPadding }); if(arrowIcon) gsap.set(arrowIcon, { rotation: 0 }); } });
            updateOwnerSectionVisibility(false);
            gsap.to("h1", { duration: 1.8, textShadow: `0 0 0.75rem var(--h1-glow-end), 0 0 1.5rem var(--h1-glow-end)`, yoyo: true, repeat: -1, ease: "sine.inOut", });

            if (loadingScreen) {
                const titleEvanescenceEl = document.getElementById("loading-title-evanescence");
                const titleUnevennesxEl = document.getElementById("loading-title-unevennesx");

                const evanescenceChars = splitTextIntoSpans("#loading-title-evanescence", "EvanescencE");
                const unevennesxChars = splitTextIntoSpans("#loading-title-unevennesx", "UnevennesX");
                
                gsap.set(titleUnevennesxEl, { opacity:0, y: 20, scale: 0.9 });

                const masterLoadingTl = gsap.timeline({
                    delay: 0.3, 
                    onComplete: () => {
                        gsap.to(loadingScreen, { 
                            autoAlpha: 0, 
                            duration: 0.8, 
                            ease: "power2.inOut",
                            onComplete: () => { 
                                gsap.to('body', { opacity: 1, duration: 0.3 });
                                const pageEntryTl = gsap.timeline({ defaults: { ease: "expo.out", duration:0.6 } });
                                pageEntryTl
                                  .fromTo(".container", { autoAlpha: 0, y: "3rem", scale:0.9 }, { autoAlpha: 1, y: "0rem", scale:1, duration:0.5})
                                  .fromTo("h1", { autoAlpha: 0, y: "1.5rem", scale:0.9 }, { autoAlpha: 1, y: "0rem", scale:1, duration: 0.4 }, "-=0.2")
                                  .fromTo("#search-input", { autoAlpha: 0, y: "1.25rem", scale:0.95 }, { autoAlpha: 1, y: "0rem", scale:1, duration: 0.4 }, "-=0.2")
                                  .fromTo(".section", { autoAlpha: 0, y: "1.25rem", scale:0.98 }, { autoAlpha: 1, y: "0rem", scale:1, duration: 0.3, stagger: { amount: 0.3, from: "start", ease: "power1.out" } }, "-=0.2")
                                  .fromTo("#music-player-container", { autoAlpha: 0, x: "-2rem", scale:0.9 }, { autoAlpha: 1, x: "0rem", scale:1, duration: 0.4, ease: "back.out(1.2)" }, "-=0.1");
                            }
                        });
                    }
                });

                masterLoadingTl
                    .staggerFromTo(evanescenceChars, 0.5, 
                        { opacity: 0, y: 30, scale: 0.7, rotationX: -80, color: "var(--primary-accent)" },
                        { opacity: 1, y: 0, scale: 1, rotationX: 0, color: "var(--text-color-light)", ease: "back.out(1.5)"}, 
                        0.06
                    )
                    .addLabel("evanescenceIn")
                    .to(evanescenceChars, {
                        duration: 0.6,
                        opacity: 0,
                        scale: 0.1,
                        filter: "blur(3px)",
                        ease: "power1.in",
                        stagger: {
                            each: 0.03,
                            from: "random",
                            onStart: function() {
                                let target = this.targets()[0];
                                gsap.to(target, {
                                    y: () => window.innerHeight * 0.25 + Math.sin(Array.from(evanescenceChars).indexOf(target) * 0.4) * 40 + gsap.utils.random(-30, 30),
                                    x: () => (Array.from(evanescenceChars).indexOf(target) - evanescenceChars.length / 2) * (gsap.utils.random(5,12)) + gsap.utils.random(-40, 40),
                                    rotationZ: () => gsap.utils.random(-180, 180),
                                    rotationX: () => gsap.utils.random(-70, 70),
                                    duration: 0.6 + Math.random() * 0.3,
                                    ease: "power1.in"
                                });
                            }
                        }
                    }, "evanescenceIn+=0.8")
                    .set(titleEvanescenceEl, { display: "none" }, ">")

                    .set(titleUnevennesxEl, { opacity:1, y: 20, scale: 0.9 })
                    .staggerFromTo(unevennesxChars, 0.6,
                        { opacity: 0, y:30, scale: 0.6, filter:"blur(8px)", color: "var(--section-title-color)" },
                        { opacity: 1, y:0, scale: 1, filter:"blur(0px)", color: "var(--text-color-light)", ease: "expo.out" },
                        0.05, "<0.2" 
                    )
                    .addLabel("unevennesxIn")
                    .to({}, {duration: 1.0}, "unevennesxIn+=0.5");

            } else { 
                 gsap.to('body', { opacity: 1, duration: 0.2 }); 
                 const pageEntryTl = gsap.timeline({ defaults: { ease: "expo.out", duration:0.6 } }); 
                 pageEntryTl .fromTo(".container", { autoAlpha: 0, y: "3.125rem", scale:0.95 }, { autoAlpha: 1, y: "0rem", scale:1, duration:0.5}) .fromTo("h1", { autoAlpha: 0, y: "1.5rem", scale:0.9 }, { autoAlpha: 1, y: "0rem", scale:1, duration: 0.4 }, "-=0.25") .fromTo("#search-input", { autoAlpha: 0, y: "1.25rem", scale:0.95 }, { autoAlpha: 1, y: "0rem", scale:1, duration: 0.4 }, "-=0.25") .fromTo(".section", { autoAlpha: 0, y: "1.25rem", scale:0.98 }, { autoAlpha: 1, y: "0rem", scale:1, duration: 0.35, stagger: { amount: 0.25, from: "start", ease: "power1.out" } }, "-=0.25") .fromTo("#music-player-container", { autoAlpha: 0, x: "-2.1875rem", scale:0.9 }, { autoAlpha: 1, x: "0rem", scale:1, duration: 0.4, ease: "back.out(1.2)" }, "-=0.1"); 
            }
        });
    </script>
</body>
</html>
