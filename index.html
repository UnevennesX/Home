
<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>✨Evanes-Uneven✨</title>
    <!-- FAVICON: Usar un archivo local y pequeño -->
    <link rel="icon" type="image/x-icon" href="/favicon.ico"> 
    <!-- O si prefieres un PNG pequeño y optimizado: -->
    <!-- <link rel="icon" type="image/png" href="/favicon-32x32.png"> -->

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <!-- Prefetch para intentar cargar las fuentes antes -->
    <link rel="prefetch" href="https://fonts.googleapis.com/css2?family=Roboto:wght=300;400;500;700;800;900&display=swap" as="style">
    <link rel="prefetch" href="https://fonts.gstatic.com/s/roboto/v30/KFOmCnqEu92DNhyPQRSl.woff2" as="font" type="font/woff2" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght=300;400;500;700;800;900&display=swap" rel="stylesheet">
    
    <!-- CSS de la PANTALLA DE CARGA: Inline y al principio para carga instantánea -->
    <style>
        #loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #151515; /* Usar el color de fondo principal */
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 10000; /* Asegurarse de que esté por encima de todo */
            opacity: 1; /* Visible por defecto */
            visibility: visible; /* Visible por defecto */
            /* Transición CSS REMOVIDA, será manejada por GSAP */
        }
        
        .loading-content {
            text-align: center;
            color: #ddd; /* Color de texto base */
            font-family: 'Roboto', sans-serif;
            font-weight: 700;
            font-size: clamp(1.5rem, 5vw, 2.5rem);
            /* Eliminar animaciones complejas de texto */
        }

        .loading-icon {
            font-size: clamp(3rem, 10vw, 6rem); /* Tamaño del icono */
            margin-bottom: 0.5em;
            color: #ff6b6b; /* Color distintivo */
            animation: pulse 1.5s infinite ease-in-out; /* Animación simple CSS */
        }

        /* Animación de pulsación simple CSS */
        @keyframes pulse {
            0% { transform: scale(1); opacity: 0.8; }
            50% { transform: scale(1.1); opacity: 1; }
            100% { transform: scale(1); opacity: 0.8; }
        }
         /* Añadir un spinner CSS básico si quieres */
        .loading-spinner {
            border: 4px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top: 4px solid #ff4081; /* Color del spinner */
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
            margin-top: 20px;
            display: none; /* Oculto por defecto, mostrar si quieres spinner */
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

    </style>

    <!-- CSS PRINCIPAL: El resto de tus estilos -->
    <style>
        :root {
            --bg-color: #151515;
            --container-bg: rgba(25, 25, 25, 0.97);
            --section-bg: rgba(40, 40, 40, 0.6);
            --primary-accent: #ff4081;
            --primary-accent-hover: #d43268;
            --section-title-color: #ff6b6b;
            --text-color: #ddd;
            --text-color-light: #fff;
            --text-muted-color: #888;
            --border-color-light: rgba(255, 255, 255, 0.08);
            --border-color-dark: #444;
            --input-bg: #222;
            --link-button-bg: rgba(255, 255, 255, 0.05);
            --link-button-hover-bg: rgba(255, 64, 129, 0.15);
            --modal-bg: #333;
            --modal-border: #888;
            --shadow-color-light: rgba(0, 0, 0, 0.2);
            --shadow-color-medium: rgba(0, 0, 0, 0.3);
            --h1-glow-start: rgba(255, 107, 107, 0.3);
            --h1-glow-end: rgba(255, 107, 107, 0.6);
            --font-family: 'Roboto', sans-serif;
            --font-size-base: 1rem;
            --font-size-sm: 0.875rem;
            --font-size-md: 1rem;
            --font-size-lg: 1.125rem;
            --font-size-xl: 1.25rem;
            --font-size-h1: 1.8rem;
            --spacing-xs: 0.25rem;
            --spacing-sm: 0.5rem;
            --spacing-md: 1rem;
            --spacing-lg: 1.5rem;
            --spacing-xl: 2rem;
            --border-radius-sm: 0.25rem;
            --border-radius-md: 0.5rem;
            --border-radius-lg: 0.75rem;
        }
        html { font-size: var(--font-size-base); height: 100%; }
        
        body { 
            font-family: var(--font-family); 
            font-size: var(--font-size-md); 
            line-height: 1.6; 
            margin: 0; 
            background-color: var(--bg-color); 
            color: var(--text-color); 
            padding: var(--spacing-sm); 
            box-sizing: border-box; 
            min-height: 100%; 
            display: flex; 
            flex-direction: column; 
            justify-content: center; 
            align-items: center; 
            overflow-x: hidden; 
            opacity: 0; /* Oculto por defecto */
            visibility: hidden; /* Oculto por defecto */
            /* Transición CSS REMOVIDA, será manejada por GSAP */
        }

        .container { width: 100%; max-width: 50rem; background: var(--container-bg); border-radius: var(--border-radius-lg); box-shadow: 0 0.125rem 0.5rem var(--shadow-color-light); padding: var(--spacing-lg) var(--spacing-xl); margin: var(--spacing-sm) auto; position: relative; z-index: 10; border: 1px solid var(--border-color-light); }
        h1 { text-align: center; color: var(--text-color-light); font-size: var(--font-size-h1); font-weight: 500; margin: var(--spacing-md) 0 var(--spacing-lg); padding: var(--spacing-sm); cursor: pointer; display: inline-block; position: relative; left: 50%; transform: translateX(-50%); transition: color 0.3s ease; }
        h1 .title-ghost { opacity: 0.7; transition: opacity 0.3s ease, transform 0.3s ease; display: inline-block; }
        h1:hover .title-ghost { opacity: 1; transform: translateY(-0.125rem) scale(1.1); }
        h1:hover { color: var(--primary-accent); }
        .section { margin-bottom: var(--spacing-sm); border-radius: var(--border-radius-md); background: var(--section-bg); overflow: hidden; transition: transform 0.3s ease, box-shadow 0.3s ease; }
        .section:hover { transform: translateY(-0.125rem); box-shadow: 0 0.25rem 0.9375rem var(--shadow-color-medium); }
        .section-header { padding: 0.75rem 1.25rem; display: flex; align-items: center; justify-content: space-between; cursor: pointer; transition: background-color 0.3s ease; }
        .section-header:hover { background-color: rgba(255, 255, 255, 0.05); }
        .section-title { font-size: 1em; font-weight: 500; color: var(--section-title-color); margin: 0; display: flex; align-items: center; gap: var(--spacing-sm); }
        .section-title .icon { width: 1.25em; height: 1.25em; stroke-width: 2.2; color: currentColor; }
        .section-title .icon.principales { color: var(--primary-accent); } .section-title .icon.destacados { color: #4dabf7; } .section-title .icon.tecnicas { color: #fab005; } .section-title .icon.utilidades { color: #8ce99a; } .section-title .icon.owner { color: #e589f0; }
        .arrow .icon { transition: transform 0.35s cubic-bezier(0.25, 0.1, 0.25, 1); color: var(--text-muted-color); width: 1.125em; height: 1.125em; }
        /* grid-links altura inicial controlada por JS para secciones colapsadas */
        .grid-links { display: grid; grid-template-columns: 1fr; gap: var(--spacing-md); padding-left: 1.375rem; padding-right: 1.375rem; height: 0; opacity: 0; overflow: hidden; }
        .link-button { padding: 0.9375rem 1.25rem; background: var(--link-button-bg); border: 1px solid var(--border-color-light); border-radius: var(--border-radius-md); color: var(--text-color); text-decoration: none; font-size: var(--font-size-sm); font-weight: 400; transition: all 0.25s cubic-bezier(0.25, 0.1, 0.25, 1); display: flex; align-items: center; justify-content: flex-start; gap: var(--spacing-sm); }
        .link-button:hover { background: var(--link-button-hover-bg); color: var(--text-color-light); transform: translateY(-0.1875rem); box-shadow: 0 0.25rem 0.625rem rgba(var(--primary-accent-rgb), 0.15); }
        .link-button .icon { width: 1em; height: 1em; stroke-width: 2.2; color: var(--text-muted-color); margin-right: var(--spacing-sm); }
        #search-input { width: 100%; padding: 0.75rem 0.9375rem; margin-bottom: var(--spacing-lg); border: 1px solid var(--border-color-dark); background-color: var(--input-bg); color: var(--text-color); border-radius: var(--border-radius-sm); box-sizing: border-box; font-size: var(--font-size-md); outline: none; transition: border-color 0.3s, box-shadow 0.3s; }
        #search-input::placeholder { color: var(--text-muted-color); }
        #search-input:focus { border-color: var(--primary-accent); box-shadow: 0 0 0 0.125rem rgba(var(--primary-accent-rgb), 0.2); }
        .modal { display: none; position: fixed; z-index: 1001; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0, 0, 0, 0.4); backdrop-filter: blur(0.1875rem); align-items: center; justify-content: center; }
        .modal-content { background-color: var(--modal-bg); color: var(--text-color); margin: auto; padding: var(--spacing-lg); border: 1px solid var(--modal-border); max-width: 28.125rem; width: 90%; border-radius: var(--border-radius-lg); box-shadow: 0 0.25rem 0.5rem var(--shadow-color-light); text-align: center; position: relative; }
        .modal-content h2 { margin-top: 0; color: var(--section-title-color); font-size: 1.5em; margin-bottom: var(--spacing-md); display: flex; align-items: center; justify-content: center; gap: var(--spacing-sm); }
        .modal-content h2 .icon { width: 1.5em; height: 1.5em; }
        .modal-content label { display: block; margin-bottom: var(--spacing-xs); color: var(--text-color-light); text-align: left; font-size: var(--font-size-sm); }
        .modal-content input[type="text"], .modal-content input[type="password"] { width: 100%; padding: 0.625rem; margin-bottom: var(--spacing-md); border: 1px solid var(--border-color-dark); background-color: var(--input-bg); color: var(--text-color); border-radius: var(--border-radius-sm); box-sizing: border-box; font-size: var(--font-size-md); }
        .modal-content input[type="text"]:focus, .modal-content input[type="password"]:focus { border-color: var(--primary-accent); box-shadow: 0 0 0 0.125rem rgba(var(--primary-accent-rgb), 0.2); outline: none; }
        .modal-content button { background-color: var(--primary-accent); color: var(--text-color-light); padding: 0.75rem 1.25rem; border: none; border-radius: var(--border-radius-sm); cursor: pointer; font-size: 1em; font-weight: 500; transition: background-color 0.3s ease; width: 100%; }
        .modal-content button:hover { background-color: var(--primary-accent-hover); }
        .modal-content p#passwordError { color: red; display: none; margin-top: var(--spacing-sm); font-size: var(--font-size-sm); }
        .close-button { color: var(--text-muted-color); position: absolute; top: 0.75rem; right: 0.9375rem; cursor: pointer; transition: color 0.2s ease, transform 0.2s ease; }
        .close-button .icon { width: 1.5em; height: 1.5em; }
        .close-button:hover { color: var(--primary-accent); transform: rotate(90deg); }
        #music-player-container { position: fixed; bottom: 0.9375rem; left: 0.9375rem; background-color: rgba(0,0,0,0.5); backdrop-filter: blur(0.3125rem); padding: 0.625rem 0.9375rem; border-radius: var(--border-radius-sm); z-index: 999; display: flex; align-items: center; gap: var(--spacing-sm); box-shadow: 0 0.1875rem 0.625rem var(--shadow-color-light); border: 1px solid var(--border-color-light); }
        #track-name { color: var(--text-color-light); font-size: var(--font-size-sm); font-weight: 500; }
        #controls-container { display: flex; align-items: center; gap: var(--spacing-xs); }
        #play-pause-button, #prev-button, #next-button { background-color: transparent; color: var(--text-color-light); border: none; padding: var(--spacing-xs); cursor: pointer; transition: color 0.3s ease, transform 0.2s ease; border-radius: 50%; display: flex; align-items: center; justify-content: center; }
        #play-pause-button:hover, #prev-button:hover, #next-button:hover { color: var(--primary-accent); transform: scale(1.1); }
        #volume-slider { width: 3.75rem; height: 0.25rem; background: #555; outline: none; opacity: 0.7; transition: opacity .2s; cursor: pointer; border-radius: 0.1875rem; -webkit-appearance: none; appearance: none; vertical-align: middle; }
        #volume-slider::-webkit-slider-thumb { -webkit-appearance: none; appearance: none; width: 0.625rem; height: 0.625rem; background: var(--text-color-light); cursor: pointer; border-radius: 50%; border: 2px solid var(--bg-color); }
        #volume-slider::-moz-range-thumb { width: 0.625rem; height: 0.625rem; background: var(--text-color-light); cursor: pointer; border-radius: 50%; border: 2px solid var(--bg-color); }
        #volume-slider:hover { opacity: 1; }
        @media (min-width: 37.5rem) { .grid-links { grid-template-columns: repeat(auto-fit, minmax(12.5rem, 1fr)); gap: var(--spacing-md); padding-left: 1.375rem; padding-right: 1.375rem; } .link-button { padding: 1.125rem 1.5625rem; } }
        @media (max-width: 37.4375rem) { body { padding: var(--spacing-sm); } .container { width: calc(100% - var(--spacing-md)); padding: var(--spacing-md); margin: var(--spacing-sm) auto; margin-bottom: 4.375rem; } h1 { font-size: 1.5em; margin: var(--spacing-sm) 0 var(--spacing-md); } .section { margin-bottom: var(--spacing-sm); } .section-header { padding: 0.75rem 0.9375rem; } .section-title { font-size: 0.9em; } .grid-links { padding-left: 1.125rem; padding-right: 1.125rem; gap: var(--spacing-sm); } .link-button { padding: 0.625rem 0.75rem; font-size: var(--font-size-sm); justify-content: center; } .link-button .icon { margin-right: var(--spacing-xs); } #search-input { padding: 0.625rem 0.75rem; margin-bottom: var(--spacing-md); } #music-player-container { bottom: var(--spacing-xs); left: var(--spacing-xs); padding: var(--spacing-xs); gap: var(--spacing-xs); width: auto; } #track-name { display: none; } #controls-container { gap: 0.187rem; } #play-pause-button .icon, #prev-button .icon, #next-button .icon { width: 0.9em; height: 0.9em; } #volume-slider { display: none; } }

    </style>
</head>

<body>
    <!-- PANTALLA DE CARGA SIMPLE Y ELEGANTE -->
    <div id="loading-screen">
        <div class="loading-content">
             <!-- Icono que pulsa -->
            <div class="loading-icon">👻</div>
            <!-- Título simplificado -->
            <div class="loading-text">UnevennesX EvannescencE</div>
            <!-- Opcional: Spinner CSS básico (descomentar si quieres) -->
            <!-- <div class="loading-spinner"></div> -->
        </div>
    </div>

    <!-- CONTENIDO PRINCIPAL: Inicialmente oculto por CSS -->
    <div class="container"> 
        <h1>
            <a href="https://unevennesx.github.io/consultas/" style="text-decoration: none; color: inherit;">UnevennesX <span class="title-ghost">👻</span> EvannescencE</a>
        </h1>

        <input type="text" id="search-input" placeholder="Buscar proyectos..."> 
        <div id="no-results-message" style="display:none; color: var(--text-color-light); text-align: center; margin: var(--spacing-md) 0;">No se encontraron resultados.</div>

        <div class="section" data-section-name="Principales"> 
            <div class="section-header">
                <div class="section-title"><i data-feather="star" class="icon principales"></i> Principales</div>
                <div class="arrow"><i data-feather="chevron-down" class="icon"></i></div>
            </div>
            <div class="grid-links">
                <a href="https://extension-de-pg.vercel.app/" class="link-button"><i data-feather="paperclip" class="icon"></i> Precio del $</a>
                <a href="https://mi-pg.vercel.app/login/" class="link-button"><i data-feather="paperclip" class="icon"></i> UnevennesX</a>
                <a href="https://unevennesx.github.io/UserAgent/" class="link-button"><i data-feather="paperclip" class="icon"></i> User Agent 2.0</a>
                <a href="https://unevennesx.github.io/Avanced-UnevennesX/" class="link-button"><i data-feather="paperclip" class="icon"></i> Avanced-EvanneS</a>
                <a href="https://unevennesx.github.io/zipcodes/" class="link-button"><i data-feather="paperclip" class="icon"></i> Zipcode</a>
            </div>
        </div>
        <div class="section" data-section-name="Destacados"> 
            <div class="section-header">
                <div class="section-title"><i data-feather="send" class="icon destacados"></i> Destacados</div>
                <div class="arrow"><i data-feather="chevron-down" class="icon"></i></div>
            </div>
            <div class="grid-links">
                <a href="https://unevennesx.github.io/-CheckLinks-/" class="link-button"><i data-feather="paperclip" class="icon"></i> ALL SAMPLICIOUS</a>
                <a href="https://unevennesx.github.io/app/" class="link-button"><i data-feather="paperclip" class="icon"></i> glimpsehere.com</a>
                <a href="https://unevennesx.github.io/zamplia/" class="link-button"><i data-feather="paperclip" class="icon"></i> Zamplia</a>
                <a href="https://unevennesx.github.io/UnevennesX/" class="link-button"><i data-feather="paperclip" class="icon"></i> Armador V1</a>
                <a href="https://unevennesx.github.io/cube/" class="link-button"><i data-feather="paperclip" class="icon"></i> Sample-Cube</a>
                <a href="https://unevennesx.github.io/savanta/" class="link-button"><i data-feather="paperclip" class="icon"></i> Savanta</a>
                <a href="https://unevennesx.github.io/ISA/" class="link-button"><i data-feather="paperclip" class="icon"></i> ISA</a>
                <a href="https://unevennesx.github.io/Survey.Dashmr/" class="link-button"><i data-feather="paperclip" class="icon"></i> Survey.Dashmr</a>
                <a href="https://unevennesx.github.io/Survey-Cint/" class="link-button"><i data-feather="paperclip" class="icon"></i> Sw.Cint</a>
                <a href="https://unevennesx.github.io/tsid/" class="link-button"><i data-feather="paperclip" class="icon"></i> TSID</a>
                <a href="https://unevennesx.github.io/rd-secured/" class="link-button"><i data-feather="paperclip" class="icon"></i> Rd.Secured <span style="opacity:0.8;">👻</span></a>
                <a href="https://unevennesx.github.io/RD-SIN-rd_proj_ud-/" class="link-button"><i data-feather="paperclip" class="icon"></i> Rd."rd_proj_ud"</a>
                <a href="https://unevennesx.github.io/All-Spectrum/" class="link-button"><i data-feather="paperclip" class="icon"></i> ALL Spectrum</a>
                <a href="https://unevennesx.github.io/spectrum-corto/" class="link-button"><i data-feather="paperclip" class="icon"></i> Spectrum Corto</a>
                <a href="https://unevennesx.github.io/Survey.Emi/" class="link-button"><i data-feather="paperclip" class="icon"></i> Survey.Emi</a>
            </div>
        </div>
        <div class="section" data-section-name="Técnicas"> 
            <div class="section-header">
                <div class="section-title"><i data-feather="code" class="icon tecnicas"></i> Técnicas</div>
                <div class="arrow"><i data-feather="chevron-down" class="icon"></i></div>
            </div>
            <div class="grid-links">
                <a href="https://unevennesx.github.io/fakename/" class="link-button"><i data-feather="paperclip" class="icon"></i> Fake-Name</a>
                <a href="https://unevennesx.github.io/cpx-tap-bit/" class="link-button"><i data-feather="paperclip" class="icon"></i> CPX</a>
                <a href="https://unevennesx.github.io/calculadora/" class="link-button"><i data-feather="paperclip" class="icon"></i> Calculadora</a>
            </div>
        </div>
        <div class="section" data-section-name="Utilidades"> 
            <div class="section-header">
                <div class="section-title"><i data-feather="tool" class="icon utilidades"></i> Utilidades</div>
                <div class="arrow"><i data-feather="chevron-down" class="icon"></i></div>
            </div>
            <div class="grid-links">
                <a href="https://unevennesx.github.io/UID-ONLY/" class="link-button"><i data-feather="paperclip" class="icon"></i> Bitlabs</a>
                <a href="https://unevennesx.github.io/userv1/" class="link-button"><i data-feather="paperclip" class="icon"></i> User Agent 1.0</a>
                <a href="https://unevennesx.github.io/agg-consultas/" class="link-button"><i data-feather="paperclip" class="icon"></i> Admin Consultas</a>
            </div>
        </div>
        
        <div class="section" data-section-name="👑 Owner" id="owner-section"> 
            <div class="section-header" id="owner-header">
                <div class="section-title"><i data-feather="lock" class="icon owner"></i> Owner</div>
                <div class="arrow"><i data-feather="chevron-down" class="icon"></i></div>
            </div>
            <div class="grid-links" id="owner-links">
                <a href="https://unevennesx.github.io/user-owner/" class="link-button"><i data-feather="paperclip" class="icon"></i> UserAgent V3</a>
                <a href="https://mi-pg.vercel.app/extraer-links/" class="link-button"><i data-feather="paperclip" class="icon"></i> Links UnevennesX</a>
                <a href="https://mi-pg.vercel.app/offline_backup/manage/" class="link-button"><i data-feather="paperclip" class="icon"></i> Backup UnevennesX</a>
            </div>
        </div>
    </div>

    <div id="music-player-container"> 
        <span id="track-name">New York</span>
        <div id="controls-container">
            <button id="prev-button" aria-label="Previous track"><i data-feather="skip-back" class="icon"></i></button>
            <button id="play-pause-button" aria-label="Play or Pause">
                <i data-feather="play" class="icon icon-play"></i><i data-feather="pause" class="icon icon-pause" style="display:none;"></i>
            </button>
            <button id="next-button" aria-label="Next track"><i data-feather="skip-forward" class="icon"></i></button>
        </div>
        <input type="range" id="volume-slider" min="0" max="1" step="0.01" value="0.1" aria-label="Volume">
        <!-- AUDIO: Añadido preload="none" para evitar la descarga inicial -->
        <audio id="background-music" loop preload="none"> 
            <source src="audio/newyork.mp3" type="audio/mpeg">
            <source src="audio/miami.mp3" type="audio/mpeg">
            <source src="audio/rd.mp3" type="audio/mpeg">
        </audio>
    </div>

    <div id="passwordModal" class="modal">
        <div class="modal-content">
            <span class="close-button" id="closeModal" aria-label="Cerrar modal"><i data-feather="x" class="icon"></i></span>
            <h2><i data-feather="key" class="icon"></i> Acceso Owner</h2>
            <label for="usernameInput">Usuario:</label>
            <input type="text" id="usernameInput" placeholder="Usuario" value="UnevennesX" readonly>
            <label for="passwordInput">Contraseña:</label>
            <input type="password" id="passwordInput" placeholder="Contraseña">
            <button id="submitPassword">Entrar</button>
            <p id="passwordError">Usuario o contraseña incorrectos.</p>
        </div>
    </div>

    <!-- SCRIPTS: GSAP para transiciones suaves, Feather para iconos -->
    <script src="js/gsap.min.js"></script>
    <script src="js/feather.min.js" defer></script> 

    <!-- SCRIPT PRINCIPAL: Oculta el loading y muestra el contenido, inicializa la página -->
    <script>
        "use strict";

        // --- Variables y Funciones Auxiliares ---
        function getRgbFromCssVar(cssVarName) { const colorStr = getComputedStyle(document.documentElement).getPropertyValue(cssVarName).trim(); if (colorStr.startsWith('#')) { const hex = colorStr.replace('#', ''); const r = parseInt(hex.substring(0, 2), 16); const g = parseInt(hex.substring(2, 4), 16); const b = parseInt(hex.substring(4, 6), 16); return `${r}, ${g}, ${b}`; } else if (colorStr.startsWith('rgba')) { const parts = colorStr.substring(colorStr.indexOf('(') + 1, colorStr.lastIndexOf(')')).split(','); return `${parseInt(parts[0])}, ${parseInt(parts[1])}, parseInt(parts[2])}`; } return '255, 64, 129';  }
        document.documentElement.style.setProperty('--primary-accent-rgb', getRgbFromCssVar('--primary-accent'));
        document.documentElement.style.setProperty('--h1-glow-start-rgb', getRgbFromCssVar('--h1-glow-start'));
        document.documentElement.style.setProperty('--h1-glow-end-rgb', getRgbFromCssVar('--h1-glow-end'));
        function normalizeString(str) { return str.normalize("NFD").replace(/[\u0300-\u036f]/g, "").toLowerCase(); }
        
        // Referencias a elementos (inicializadas en setupPageInteractiveElements)
        let searchInput, noResultsMessage, audio, playPauseButton, prevButton, nextButton, volumeSlider, trackNameDisplay, passwordModal, closeModalButton, submitPasswordButton, passwordInput, ownerSection, ownerHeader, ownerLinks, passwordError;

        // Credenciales
        const correctUsername = "UnevennesX"; 
        const correctPassword = "EvannescencE";

        let isAuthenticated = localStorage.getItem('isAuthenticated') === 'true';
        let isPlaying = false;
        let currentTrackIndex = 0;
        const tracks = [ { src: "audio/newyork.mp3", name: "New York" }, { src: "audio/miami.mp3", name: "Miami" }, { src: "audio/rd.mp3", name: "RD" }, ];
        let hasInteracted = false;

        // Configuración de GSAP para animaciones (no carga inicial)
        const gridLinksPadding = { top: "1.25rem", bottom: "1.25rem" };
        const sectionEase = "power3.inOut";
        const sectionDuration = 0.35;

        // Lógica para la sección Owner
        function updateOwnerSectionVisibility(animate = false) {
            if (!ownerSection || !ownerLinks) return; 

            const isCurrentlyActive = ownerSection.classList.contains('active');
            ownerSection.style.display = "block"; 

            const targetProps = { height: 0, opacity: 0, paddingTop: "0px", paddingBottom: "0px" };
            
            if (isAuthenticated && isCurrentlyActive) {
                 targetProps.height = "auto";
                 targetProps.opacity = 1;
                 targetProps.paddingTop = gridLinksPadding.top;
                 targetProps.paddingBottom = gridLinksPadding.bottom;
            } else if (!isAuthenticated && isCurrentlyActive) {
                 ownerSection.classList.remove('active'); 
            } else if (isAuthenticated && !isCurrentlyActive && ownerLinks.style.height === "0px") {
                 targetProps.height = "auto";
                 targetProps.opacity = 1;
                 targetProps.paddingTop = gridLinksPadding.top;
                 targetProps.paddingBottom = gridLinksPadding.bottom;
            }

            const arrowIcon = ownerHeader ? ownerHeader.querySelector('.arrow .icon') : null;

            // Only use GSAP if it's loaded
            if (typeof gsap !== 'undefined') {
                if (animate) {
                    gsap.to(ownerLinks, { ...targetProps, duration: sectionDuration, ease: sectionEase });
                     if (arrowIcon) {
                        gsap.to(arrowIcon, { rotation: (isAuthenticated && ownerSection.classList.contains('active')) ? 180 : 0, duration: 0.3, ease: sectionEase });
                     }
                } else {
                     gsap.set(ownerLinks, targetProps);
                     if (arrowIcon) {
                        gsap.set(arrowIcon, { rotation: (isAuthenticated && ownerSection.classList.contains('active')) ? 180 : 0 });
                     }
                }
            } else { 
                 ownerLinks.style.height = targetProps.height === 'auto' ? 'auto' : '0px';
                 ownerLinks.style.opacity = targetProps.opacity; 
                 ownerLinks.style.paddingTop = targetProps.paddingTop;
                 ownerLinks.style.paddingBottom = targetProps.paddingBottom;
                 if(arrowIcon) arrowIcon.style.transform = `rotate(${(isAuthenticated && ownerSection.classList.contains('active')) ? 180 : 0}deg)`;
            }

             if (!isAuthenticated && !ownerSection.classList.contains('active')) {
                 ownerSection.style.display = "none";
             }
        }


        function checkPassword() { 
             const enteredPassword = passwordInput.value; if (enteredPassword === correctPassword) { isAuthenticated = true; localStorage.setItem("isAuthenticated", "true"); if (passwordModal) { if (typeof gsap !== 'undefined') { gsap.to(passwordModal.querySelector('.modal-content'), { y: 20, opacity: 0, scale: 0.95, duration: 0.25, ease: "power2.in" }); gsap.to(passwordModal, { autoAlpha: 0, duration: 0.3, delay:0.1, ease: "power2.in", onComplete: () => passwordModal.style.display = "none" }); } else { passwordModal.style.display = "none"; passwordModal.style.opacity = '0'; passwordModal.style.visibility = 'hidden'; } } if (ownerSection) { ownerSection.classList.add("active"); } if (passwordError) passwordError.style.display = "none"; if (passwordInput) passwordInput.value = ""; updateOwnerSectionVisibility(true); } else { if (passwordError) { passwordError.style.display = "block"; if (typeof gsap !== 'undefined') { gsap.fromTo(passwordError, {opacity: 0, y: -10}, {opacity: 1, y: 0, duration: 0.3, ease: "bounce.out"}); gsap.fromTo(passwordModal.querySelector('.modal-content'), {x:0}, {x:10, duration:0.05, repeat:5, yoyo:true, clearProps:"x", ease:"circ.inOut"}); } } isAuthenticated = false; localStorage.setItem("isAuthenticated", "false"); updateOwnerSectionVisibility(); }
        }

        function handleSearch() { 
             let searchTerm = searchInput.value; searchTerm = normalizeString(searchTerm); let hasResults = false; let ownerHasVisibleLinks = false; if (searchTerm.length < 2) { document.querySelectorAll('.section').forEach(section => { section.style.display = 'block'; }); document.querySelectorAll('.link-button').forEach(link => { link.style.display = 'flex'; }); if (noResultsMessage) noResultsMessage.style.display = 'none'; 

             document.querySelectorAll('.section:not(#owner-section)').forEach(section => {
                 section.classList.remove('active');
                 const gridLinks = section.querySelector('.grid-links');
                 const arrowIcon = section.querySelector('.arrow .icon');
                 if (gridLinks) {
                     if (typeof gsap !== 'undefined') {
                         gsap.to(gridLinks, { height: 0, opacity: 0, paddingTop: "0px", paddingBottom: "0px", duration: sectionDuration, ease: sectionEase });
                     } else {
                         gridLinks.style.height = '0'; gridLinks.style.opacity = '0'; gridLinks.style.paddingTop = '0px'; gridLinks.style.paddingBottom = '0px';
                     }
                 }
                  if(arrowIcon) {
                     if (typeof gsap !== 'undefined') { gsap.to(arrowIcon, { rotation: 0, duration: 0.3, ease: sectionEase }); }
                     else { arrowIcon.style.transform = 'rotate(0deg)'; }
                  }
             });

             ownerSection.classList.remove('active');
             updateOwnerSectionVisibility(true);

             return; } document.querySelectorAll('.section').forEach(section => { section.style.display = 'none'; }); document.querySelectorAll('.link-button').forEach(link => { link.style.display = 'none'; }); document.querySelectorAll('.link-button').forEach(link => { const linkText = normalizeString(link.textContent); const section = link.closest('.section'); if (section && linkText.includes(searchTerm)) { const isOwnerLink = section.id === 'owner-section'; if (!isOwnerLink) { link.style.display = 'flex'; section.style.display = 'block'; if (!section.classList.contains('active')) { section.classList.add('active'); const gridLinks = section.querySelector('.grid-links'); const arrowIcon = section.querySelector('.arrow .icon'); if (typeof gsap !== 'undefined') { gsap.to(gridLinks, { height: "auto", opacity: 1, paddingTop: gridLinksPadding.top, paddingBottom: gridLinksPadding.bottom, duration: sectionDuration, ease: sectionEase }); if(arrowIcon) gsap.to(arrowIcon, { rotation: 180, duration: 0.3, ease: sectionEase }); } else { gridLinks.style.height = 'auto'; gridLinks.style.opacity = '1'; gridLinks.style.paddingTop = gridLinksPadding.top; gridLinks.style.paddingBottom = gridLinksPadding.bottom; if(arrowIcon) arrowIcon.style.transform = 'rotate(180deg)'; } } hasResults = true; } else if (isOwnerLink && isAuthenticated) { link.style.display = 'flex'; ownerHasVisibleLinks = true; hasResults = true; } } }); if (ownerSection) { if (ownerHasVisibleLinks) { ownerSection.style.display = 'block'; if (isAuthenticated && !ownerSection.classList.contains('active')) { ownerSection.classList.add('active'); updateOwnerSectionVisibility(true); } else if (isAuthenticated && ownerSection.classList.contains('active')) { updateOwnerSectionVisibility(false); } else if (!isAuthenticated && ownerSection.classList.contains('active')) { ownerSection.classList.remove('active'); updateOwnerSectionVisibility(true); } else if (!isAuthenticated && !ownerSection.classList.contains('active')) { updateOwnerSectionVisibility(false); ownerSection.style.display = 'none'; } } else { ownerSection.classList.remove('active'); updateOwnerSectionVisibility(true); ownerSection.style.display = 'none'; } } if (noResultsMessage) noResultsMessage.style.display = hasResults ? 'none' : 'block'; 
        }

        // Lógica del reproductor de audio
        function loadTrack(trackIndex) { 
            if (trackIndex < 0) { trackIndex = tracks.length - 1; } else if (trackIndex >= tracks.length) { trackIndex = 0; } 
            currentTrackIndex = trackIndex; 
            if (audio) { 
                const newSrc = tracks[trackIndex].src; 
                const currentSrcPath = audio.currentSrc ? new URL(audio.currentSrc, window.location.href).pathname : null; 
                const newSrcPath = new URL(newSrc, window.location.href).pathname; 
                if (!audio.src || currentSrcPath !== newSrcPath) { 
                    try { audio.src = newSrc; audio.load(); } catch(err){ console.error("Error setting audio src:", err); } 
                } 
            } 
            if (trackNameDisplay) trackNameDisplay.textContent = tracks[trackIndex].name; 
            localStorage.setItem("currentTrackIndex", currentTrackIndex); 
        }

        function loadSavedState() { 
            const e = localStorage.getItem("currentTrackIndex");
            currentTrackIndex = e !== null ? parseInt(e, 10) : 0;
            const t = localStorage.getItem("volume");
            if (volumeSlider) { volumeSlider.value = t !== null ? t : .1; }
            if (audio) audio.volume = t !== null ? t : .1;

            loadTrack(currentTrackIndex);

            if(playPauseButton){
                const playIcon = playPauseButton.querySelector('.icon-play');
                const pauseIcon = playPauseButton.querySelector('.icon-pause');
                playIcon.style.display = 'inline-block';
                pauseIcon.style.display = 'none';
            }
        }

        function initialUserInteraction() { 
            if (!hasInteracted && audio) { 
                hasInteracted = true; 
                loadTrack(currentTrackIndex); 

                if (localStorage.getItem("musicState") === "playing") {
                    audio.play().then(() => {
                        isPlaying = true;
                        if (playPauseButton) {
                            const playIcon = playPauseButton.querySelector('.icon-play');
                            const pauseIcon = playPauseButton.querySelector('.icon-pause');
                            playIcon.style.display = 'none';
                            pauseIcon.style.display = 'inline-block';
                        }
                    }).catch(e => {
                        console.warn("La reproducción automática en la primera interacción falló:", e);
                        localStorage.setItem("musicState", "paused");
                        isPlaying = false;
                        if (playPauseButton) {
                            const playIcon = playPauseButton.querySelector('.icon-play');
                            const pauseIcon = playPauseButton.querySelector('.icon-pause');
                            playIcon.style.display = 'inline-block';
                            pauseIcon.style.display = 'none';
                        }
                    });
                } else {
                    isPlaying = false; 
                }
            } 
            document.removeEventListener("click", initialUserInteraction); 
            document.removeEventListener("touchstart", initialUserInteraction); 
        }

        // --- Función de inicialización de la página principal ---
        // Contiene toda la lógica que NO es la pantalla de carga inicial
        function setupPageInteractiveElements() {
             // Obtener referencias a elementos DESPUÉS de que el DOM esté listo
             searchInput = document.getElementById('search-input');
             noResultsMessage = document.getElementById('no-results-message');
             audio = document.getElementById('background-music');
             playPauseButton = document.getElementById('play-pause-button');
             prevButton = document.getElementById('prev-button');
             nextButton = document.getElementById('next-button');
             volumeSlider = document.getElementById('volume-slider');
             trackNameDisplay = document.getElementById('track-name');
             passwordModal = document.getElementById('passwordModal');
             closeModalButton = document.getElementById('closeModal');
             submitPasswordButton = document.getElementById('submitPassword');
             passwordInput = document.getElementById('passwordInput');
             ownerSection = document.getElementById('owner-section');
             ownerHeader = document.getElementById('owner-header');
             ownerLinks = document.getElementById('owner-links');
             passwordError = document.getElementById('passwordError');


            // Inicializar Feather Icons (se ejecuta si feather.min.js ya terminó de cargar o está diferido)
            if (typeof feather !== 'undefined') {
                feather.replace({width: '1em', height: '1em', 'stroke-width': 2.2});
            } else {
                 console.warn("Feather Icons script not loaded. Icons might not display.");
            }
            
            // Cargar el estado guardado del audio (volumen, pista)
            loadSavedState();

            // Configurar estados iniciales de las secciones al cargar (colapsadas por defecto, Owner depende de auth)
            document.querySelectorAll('.section').forEach(section => { 
                 const gridLinks = section.querySelector('.grid-links'); 
                 const arrowIcon = section.querySelector('.arrow .icon'); 
                 const initialPadding = { paddingTop: "0px", paddingBottom: "0px" }; 
                 
                 if (section.id !== 'owner-section') {
                     section.classList.remove('active'); 
                     if (gridLinks) {
                         if (typeof gsap !== 'undefined') {
                             gsap.set(gridLinks, { height: 0, opacity: 0, ...initialPadding }); 
                         } else {
                             gridLinks.style.height = '0';
                             gridLinks.style.opacity = '0';
                             gridLinks.style.paddingTop = '0px';
                             gridLinks.style.paddingBottom = '0px';
                         }
                     }
                      if(arrowIcon && typeof gsap !== 'undefined') gsap.set(arrowIcon, { rotation: 0 }); 
                 } else {
                     if(isAuthenticated) {
                         section.classList.add('active');
                     } else {
                         section.classList.remove('active');
                     }
                 }
            });
            
            // Ajustar el estado inicial VISUAL de la sección Owner basado en la autenticación
            updateOwnerSectionVisibility(false); 

            // Animación del título con brillo
            if (typeof gsap !== 'undefined') {
                gsap.to("h1", { 
                    duration: 1.8, 
                    textShadow: `0 0 0.75rem var(--h1-glow-end), 0 0 1.5rem var(--h1-glow-end)`, 
                    yoyo: true, 
                    repeat: -1, 
                    ease: "sine.inOut", 
                });
            } else {
                 console.warn("GSAP no está cargado. La animación del título no funcionará.");
            }

            // --- Adjuntar Event Listeners ---
             document.querySelectorAll('.section:not(#owner-section) .section-header').forEach(header => { 
                header.addEventListener('click', () => { 
                    if (typeof gsap === 'undefined') { /* fallback */ } else {
                        const section = header.parentElement; 
                        const gridLinks = section.querySelector('.grid-links'); 
                        const arrowIcon = header.querySelector('.arrow .icon'); 
                        const isCurrentlyActive = section.classList.contains('active');

                        document.querySelectorAll('.section:not(#owner-section)').forEach(otherSection => {
                             if (otherSection !== section && otherSection.classList.contains('active')) {
                                 otherSection.classList.remove('active');
                                 const otherGridLinks = otherSection.querySelector('.grid-links');
                                 const otherArrowIcon = otherSection.querySelector('.arrow .icon');
                                 gsap.to(otherGridLinks, { height: 0, opacity: 0, paddingTop: "0px", paddingBottom: "0px", duration: sectionDuration, ease: sectionEase });
                                 if(otherArrowIcon) gsap.to(otherArrowIcon, { rotation: 0, duration: 0.3, ease: sectionEase });
                             }
                         });

                        section.classList.toggle('active');

                        if (!isCurrentlyActive) { 
                            gsap.to(gridLinks, { height: "auto", opacity: 1, paddingTop: gridLinksPadding.top, paddingBottom: gridLinksPadding.bottom, duration: sectionDuration, ease: sectionEase }); 
                            if(arrowIcon) gsap.to(arrowIcon, { rotation: 180, duration: 0.3, ease: sectionEase }); 
                        } else { 
                            gsap.to(gridLinks, { height: 0, opacity: 0, paddingTop: "0px", paddingBottom: "0px", duration: sectionDuration, ease: sectionEase }); 
                            if(arrowIcon) gsap.to(arrowIcon, { rotation: 0, duration: 0.3, ease: sectionEase }); 
                        }
                    }
                }); 
             });

             searchInput?.addEventListener('input', handleSearch);
             playPauseButton?.addEventListener('click', () => { 
                 const playIcon = playPauseButton.querySelector('.icon-play');
                 const pauseIcon = playPauseButton.querySelector('.icon-pause');
                 if (isPlaying) { audio.pause(); playIcon.style.display = 'inline-block'; pauseIcon.style.display = 'none'; localStorage.setItem("musicState", "paused"); isPlaying = false; } else { if (!audio.src || audio.src === window.location.href + "#") { loadTrack(currentTrackIndex); } audio.play().then(() => { playIcon.style.display = 'none'; pauseIcon.style.display = 'inline-block'; localStorage.setItem("musicState", "playing"); isPlaying = true; }).catch(e => { console.error("Error playing audio on button click:", e); playIcon.style.display = 'inline-block'; pauseIcon.style.display = 'none'; localStorage.setItem("musicState", "paused"); isPlaying = false; }); }
             });
             prevButton?.addEventListener('click', () => { loadTrack(currentTrackIndex-1);if(isPlaying){audio.play().catch(e=>console.error("Error playing prev audio:",e))} });
             nextButton?.addEventListener('click', () => { loadTrack(currentTrackIndex+1);if(isPlaying){audio.play().catch(e=>console.error("Error playing next audio:",e))} });
             volumeSlider?.addEventListener('input', () => { if (audio) audio.volume=volumeSlider.value; localStorage.setItem("volume",volumeSlider.value) });
             audio?.addEventListener('ended', () => { if(isPlaying){loadTrack(currentTrackIndex+1);audio.play().catch(e=>console.error("Error playing audio on ended:",e))}else{loadTrack(currentTrackIndex+1)} });
            
             // Listen for first user interaction to potentially start audio
             document.addEventListener('click', initialUserInteraction, { once: true });
             document.addEventListener('touchstart', initialUserInteraction, { once: true });

             ownerHeader?.addEventListener('click', (event) => { 
                 event.preventDefault(); 
                 const arrowIcon = ownerHeader.querySelector('.arrow .icon'); 
                 if (!isAuthenticated) { 
                     if (passwordModal) { 
                         passwordModal.style.display = "flex"; 
                         if (typeof gsap !== 'undefined') {
                             gsap.fromTo(passwordModal, {autoAlpha:0}, { autoAlpha: 1, duration: 0.3, ease: "power2.out" }); 
                             gsap.fromTo(passwordModal.querySelector('.modal-content'), { y: "-1.875rem", opacity: 0, scale:0.95}, { y: "0rem", opacity: 1, scale:1, duration: 0.4, ease: "back.out(1.7)"}); 
                         } else { passwordModal.style.opacity = '1'; passwordModal.style.visibility = 'visible'; passwordModal.querySelector('.modal-content').style.opacity = '1'; passwordModal.querySelector('.modal-content').style.transform = 'translateY(0)'; }
                     } 
                     if (passwordInput) passwordInput.focus(); 
                 } else { 
                     ownerSection.classList.toggle("active"); 
                     updateOwnerSectionVisibility(true); 
                 } 
             });

             closeModalButton?.addEventListener('click', () => { 
                 if (passwordModal) { 
                     if (typeof gsap !== 'undefined') { gsap.to(passwordModal.querySelector('.modal-content'), { y: "1.25rem", opacity: 0, scale: 0.95, duration: 0.25, ease: "power2.in" }); gsap.to(passwordModal, { autoAlpha: 0, duration: 0.3, delay:0.1, ease: "power2.in", onComplete: () => passwordModal.style.display = "none" }); } else { passwordModal.style.display = "none"; passwordModal.style.opacity = '0'; passwordModal.style.visibility = 'hidden'; passwordModal.querySelector('.modal-content').style.opacity = '0'; passwordModal.querySelector('.modal-content').style.transform = 'translateY(1.25rem)'; }
                 } 
             });

             submitPasswordButton?.addEventListener('click', checkPassword);
             passwordInput?.addEventListener('keypress', (event) => { if (event.key === "Enter") { checkPassword(); } });

             window.addEventListener('click', (event) => { 
                 if (event.target === passwordModal && passwordModal && passwordModal.style.display !== "none") { 
                     if (typeof gsap !== 'undefined') { gsap.to(passwordModal.querySelector('.modal-content'), { y: "1.25rem", opacity: 0, scale: 0.95, duration: 0.25, ease: "power2.in" }); gsap.to(passwordModal, { autoAlpha: 0, duration: 0.3, delay:0.1, ease: "power2.in", onComplete: () => passwordModal.style.display = "none" }); } else { passwordModal.style.display = "none"; passwordModal.style.opacity = '0'; passwordModal.style.visibility = 'hidden'; passwordModal.querySelector('.modal-content').style.opacity = '0'; passwordModal.querySelector('.modal-content').style.transform = 'translateY(1.25rem)'; }
                 } 
             });

        } // Fin de setupPageInteractiveElements

        // --- Lógica principal de carga y revelado ---
        // Escuchar el evento DOMContentLoaded para saber cuándo el HTML está listo.
        document.addEventListener("DOMContentLoaded", () => {
            const loadingScreen = document.getElementById('loading-screen');
            const body = document.body;

            // Aumentar el tiempo mínimo que se muestra el loader (en milisegundos)
            const MIN_LOADING_DISPLAY_TIME = 750; // Aumentado de 200 a 750
            const startTime = Date.now();

            // Esta función oculta el loader y muestra el contenido principal
            function revealContent() {
                 const elapsedTime = Date.now() - startTime;
                 const remainingTime = MIN_LOADING_DISPLAY_TIME - elapsedTime;

                 const performTransition = () => {
                     // Asegurarse de que GSAP está disponible para la transición suave
                     if (loadingScreen && typeof gsap !== 'undefined') {
                         const masterRevealTl = gsap.timeline({
                             onComplete: () => {
                                 // Ocultar completamente el loader después de la animación
                                 gsap.set(loadingScreen, { visibility: 'hidden', display: 'none' });
                                 // Ejecutar la inicialización de la página después de que el loader desaparezca
                                 setupPageInteractiveElements(); 
                             }
                         });

                         // Animación: Loader fade out, Body fade in (simultáneamente)
                         masterRevealTl
                            // Hacer el body visible antes de animar su opacidad
                            .set(body, { visibility: 'visible' })
                            // Animar simultáneamente: fade out loader y fade in body
                            .to(loadingScreen, { opacity: 0, duration: 0.8, ease: "power2.inOut" }, 0) 
                            .fromTo(body, 
                                { opacity: 0, scale: 0.98 }, // Start from slightly scaled down and invisible
                                { opacity: 1, scale: 1, duration: 0.8, ease: "power2.inOut" }, // Animate to full opacity and scale, same duration as loader fade
                                0 // Start at the same time as loader fade
                            );
                         
                     } else {
                         // Fallback simple si GSAP no está cargado
                         if(loadingScreen) {
                             loadingScreen.style.opacity = '0';
                             loadingScreen.style.visibility = 'hidden';
                             loadingScreen.style.display = 'none';
                         }
                         body.style.opacity = '1';
                         body.style.visibility = 'visible';
                         // Ejecutar inicialización inmediatamente en fallback
                         setupPageInteractiveElements(); 
                     }
                 };

                 if (remainingTime > 0) {
                     // Esperar el tiempo restante para cumplir el mínimo
                     setTimeout(performTransition, remainingTime);
                 } else {
                     // El tiempo mínimo ya pasó, ejecutar la transición inmediatamente
                     performTransition(); 
                 }
            }

            // Llamar a revealContent una vez que el DOM esté listo
            revealContent();

        });

        // Las funciones setupPageInteractiveElements, updateOwnerSectionVisibility, checkPassword,
        // handleSearch, loadTrack, loadSavedState, initialUserInteraction
        // se definen fuera del listener DOMContentLoaded para que initializePage pueda llamarlas.
        // Sus event listeners se adjuntan dentro de setupPageInteractiveElements.


    </script>
</body>
</html>
